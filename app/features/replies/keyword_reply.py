# app/features/replies/keyword_reply.py
"""
Layer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö mapping ‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏î ‚Üí ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç / ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
"""

from typing import Optional

# === Keyword mapping ===
KEYWORD_MAP = {
    # ===== ‡∏ä‡∏∏‡∏î‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏Å‡∏ß‡∏ô‡πÜ =====
    "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ": "‡∏ó‡∏±‡∏Å‡∏Ñ‡∏ß‡∏¢‡πÑ‡∏£‡∏ß‡∏∞ ü§î",
    "‡∏´‡∏ß‡∏±‡∏î‡∏î‡∏µ": "‡πÑ‡∏´‡∏ß‡πâ‡∏û‡πà‡∏≠‡∏°‡∏∂‡∏á‡πÄ‡∏ñ‡∏≠‡∏∞ üòÇ",
    "‡πÄ‡∏Æ‡πÇ‡∏´‡∏•": "‡∏Æ‡∏±‡∏•‡πÇ‡∏´‡∏•~ ‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤ üòè",
    "‡πÑ‡∏á": "‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡πÄ‡∏≠‡∏≤ üòú",
    "‡∏Æ‡∏±‡∏•‡πÇ‡∏´‡∏•": "‡∏Å‡∏∏‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢ ",
    "‡∏î‡∏µ‡∏à‡πâ‡∏≤": "‡∏î‡∏µ‡∏¢‡πå... ‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏™‡πÑ‡∏ï‡∏•‡πå ‚úåÔ∏è",
    "‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö": "‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö... ‡∏ï‡∏±‡∏á‡∏Ñ‡πå‡∏°‡∏µ‡∏õ‡πà‡∏∞‡∏¢‡∏∑‡∏°‡∏´‡∏ô‡πà‡∏≠‡∏¢ üí∏",
    "‡∏î‡∏µ‡∏Ñ‡πà‡∏∞": "‡∏î‡∏µ‡∏Ñ‡πà‡∏∞... ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ç‡πâ‡∏≤‡∏ß‡∏à‡∏∞‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ ü§≠",
    "‡∏ß‡πà‡∏≤‡πÑ‡∏á": "‡∏ß‡πà‡∏≤‡πÑ‡∏á‡∏•‡πà‡∏∞... ‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡∏¢‡∏∑‡∏°‡πÄ‡∏á‡∏¥‡∏ô üòè",
    "‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á": "‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏∞ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ñ‡∏≤‡∏° üòÖ",
    "‡∏≠‡∏£‡∏∏‡∏ì‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå": "‡∏≠‡∏£‡∏∏‡∏ì‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå... ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏•‡∏¢ üò¥",
    "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤": "‡πÄ‡∏ä‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ... ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ä‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‚òïÔ∏è",
    "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢": "‡∏ö‡πà‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡πÅ‡∏Ñ‡πà‡∏ô‡∏≠‡∏ô‡∏Å‡πá‡∏û‡∏≠ üò™",
    "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô": "‡πÄ‡∏¢‡πá‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡πÑ‡∏£‡∏î‡∏µ? ‡∏≠‡∏¢‡πà‡∏≤‡∏ö‡∏≠‡∏Å‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏°‡πà‡∏≤ üçú",
    "‡∏£‡∏≤‡∏ï‡∏£‡∏µ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå": "‡∏ù‡∏±‡∏ô‡∏î‡∏µ... ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏ú‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡πÇ‡∏ó‡∏©‡πÄ‡∏£‡∏≤‡∏ô‡∏∞ üëª",
    "‡∏Å‡∏π‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß": "‡πÄ‡∏≠‡πâ‡∏≤! ‡∏Å‡πá‡∏°‡∏≤‡∏î‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö üî•",
    "‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß": "‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏≠‡∏¢‡πà‡∏≤‡∏°‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡∏Ç‡∏≠‡∏á‡∏ù‡∏≤‡∏Å‡∏•‡πà‡∏∞ ü§®",
    "‡πÇ‡∏¢‡πà‡∏ß": "‡πÇ‡∏¢‡πà‡∏ß‡πÜ‡πÜ... ‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏£‡πá‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏õ‡∏∞ üé§",
    "‡πÇ‡∏≠‡πÄ‡∏Ñ": "‡πÇ‡∏≠‡πÄ‡∏Ñ... ‡πÅ‡∏ï‡πà‡πÉ‡∏à‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏≠‡πÄ‡∏Ñ‡∏ô‡∏∞ üíî",

    # ===== ‡∏ä‡∏∏‡∏î BTC/‡∏Å‡∏≤‡∏£‡∏û‡∏ô‡∏±‡∏ô‡∏Å‡∏ß‡∏ô‡πÜ =====
    "btc": "BTC ‡∏ô‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏Ñ‡∏≤‡∏™‡∏¥‡πÇ‡∏ô‡∏ä‡∏±‡∏î ‡πÜ üé∞",
    "‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏≠‡∏Ñ": "‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏≠‡∏Ñ‡∏ó‡∏µ‡πÑ‡∏£ ‡πÄ‡∏à‡πä‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ üò≠",
    "‡πÄ‡∏õ‡∏¥‡∏î‡∏ä‡∏≠‡∏ó": "‡πÄ‡∏õ‡∏¥‡∏î‡∏ä‡∏≠‡∏ó‡∏õ‡∏∏‡πä‡∏ö... ‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ó‡∏∞‡∏•‡∏∏‡∏à‡∏≠ üü¢",
    "sl": "SL ‡πÇ‡∏î‡∏ô‡∏Å‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢... ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏à‡∏∞‡πÑ‡∏´‡∏• üí¶",
    "tp": "TP ‡πÇ‡∏î‡∏ô‡πÄ‡∏â‡∏µ‡∏¢‡∏î ‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏î‡πâ‡∏á‡∏Å‡∏•‡∏±‡∏ö ‡πÄ‡∏à‡πá‡∏ö‡∏à‡∏µ‡πä‡∏î üò§",
    "‡∏ï‡∏¥‡∏î‡∏î‡∏≠‡∏¢": "‡∏î‡∏≠‡∏¢‡∏™‡∏π‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÅ‡∏•‡πâ‡∏ß üèîÔ∏è",
    "‡∏ï‡∏Å‡∏£‡∏ñ": "‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ö‡∏≤‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡πâ‡∏≠‡∏á ü§£",
    "‡∏ï‡∏≤‡∏°‡∏û‡∏µ‡πà": "‡∏≠‡∏¢‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏¢... ‡∏û‡∏µ‡πà‡πÄ‡∏≠‡∏á‡∏Å‡πá‡∏ï‡∏¥‡∏î‡∏î‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà üòÖ",
    "‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏ó‡∏£‡∏î": "‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏≠‡∏Å ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á üé¢",
    "‡πÄ‡∏à‡πä‡∏á": "‡πÄ‡∏à‡πä‡∏á‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß... ‡∏ù‡∏≤‡∏Å‡∏ï‡∏±‡∏á‡∏Ñ‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏õ‡∏∞ üí∏",
    "‡πÅ‡∏ï‡∏Å‡∏û‡∏≠‡∏£‡πå‡∏ï": "‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÅ‡∏ï‡∏Å... ‡πÅ‡∏ï‡πà‡πÉ‡∏à‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏Å (‡∏°‡∏±‡πâ‡∏á) üíî",
    "‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô btc": "‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô BTC... ‡∏Ç‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏•‡∏∞ üçó",
    "‡∏ü‡∏•‡∏≠‡∏£‡πå": "‡∏•‡∏á‡πÅ‡∏£‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ó‡∏∞‡∏•‡∏∏‡πÉ‡∏ï‡πâ‡∏ñ‡∏∏‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß üï≥Ô∏è",
    "‡∏ö‡∏¥‡∏ô": "‡∏ö‡∏¥‡∏ô‡∏ó‡∏µ‡πÑ‡∏£ ‡∏ï‡∏Å‡∏£‡∏ñ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ ‚úàÔ∏è",
    "‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô": "‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏Å‡πá‡∏¢‡∏∑‡∏ô‡∏°‡∏≠‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏•‡∏∞‡∏Å‡∏±‡∏ô üëÄ",
    "‡πÅ‡∏ó‡∏á‡∏™‡∏ß‡∏ô": "‡πÅ‡∏ó‡∏á‡∏™‡∏ß‡∏ô‡∏ó‡∏µ‡πÑ‡∏£ ‡πÇ‡∏î‡∏ô‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏ö‡∏à‡∏°‡∏î‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ ü§Ø",
}



def get_reply(text: str) -> Optional[str]:
    """
    ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà match ‚Üí ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
    ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‚Üí return None
    """
    if not text:
        return None

    normalized = text.strip().lower()
    for key, reply in KEYWORD_MAP.items():
        if normalized == key.lower():
            return reply
    return None
